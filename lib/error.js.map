{"version":3,"sources":["lib/error.ts"],"names":[],"mappings":"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","file":"error.js","sourcesContent":["export class PlumError {\n    constructor(public status: number, public code: string, public message: string) {\n    };\n}\n\nexport class ParametersPlumError extends PlumError {\n    constructor(message: string) {\n        super(400, PlumErrorCodes.parameters_error, message);\n    }\n}\n\nexport class UnauthorizedPlumError extends PlumError {\n    constructor(message: string = \"Unauthorized access\") {\n        super(401, PlumErrorCodes.unauthorized, message);\n    }\n}\n\nexport class ForbiddenPlumError extends PlumError {\n    constructor(message: string = \"Access forbidden\") {\n        super(403, PlumErrorCodes.forbidden, message);\n    }\n}\n\nexport class NotFoundPlumError extends PlumError {\n    constructor(message: string = \"Entity not found error\") {\n        super(404, PlumErrorCodes.not_found, message);\n    }\n}\n\nexport class NotAllowedPlumError extends PlumError {\n    constructor(message: string = \"Method not allowed error\", public scope?: any) {\n        super(405, PlumErrorCodes.not_allowed, message);\n    }\n}\n\nexport class TimeoutPlumError extends PlumError {\n    constructor(message: string = \"Method timeout error\", public scope?: any) {\n        super(408, PlumErrorCodes.timeout, message);\n    }\n}\n\nexport class PreconditionFailedPlumError extends PlumError {\n    constructor(message: string = null) {\n        super(412, PlumErrorCodes.predondition_error, message);\n    }\n}\n\nexport class FieldError {\n    constructor(public code: string, public message: string) {\n    }\n}\n\nexport class ValidationPlumError extends PlumError {\n    constructor(public fields: { [key: string]: FieldError; }, message: string = null) {\n        super(422, PlumErrorCodes.validation_error, message);\n    }\n}\n\nexport class ServerPlumError extends PlumError {\n    constructor(message: string = \"Unexpected server error\") {\n        super(500, PlumErrorCodes.server_error, message);\n    }\n}\n\nexport const transformSenecaError = (err: any): PlumError | any => {\n    if (err instanceof  PlumError) {\n        return err;\n    } else if (err.seneca && err.details && err.details.message) {\n        switch (err.details.message) {\n            case \"[TIMEOUT]\":\n                return new TimeoutPlumError(err.msg);\n        }\n    } else {\n        return new ServerPlumError(err.message);\n    }\n};\n\n/** Utility function to create a K:V from a list of strings */\nfunction strEnum<T extends string>(o: Array<T>): {[K in T]: K} {\n    return o.reduce((res, key) => {\n        res[key] = key;\n        return res;\n    }, Object.create(null));\n}\n\n/** Create a K:V */\nexport const PlumErrorCodes = strEnum([\n    \"server_error\",\n    \"not_found\",\n    \"not_allowed\",\n    \"forbidden\",\n    \"timeout\",\n    \"unauthorized\",\n    \"parameters_error\",\n    \"validation_error\",\n    \"predondition_error\",\n]);\n/** Create a Type */\nexport type PlumErrorCodes = keyof typeof PlumErrorCodes;"]}